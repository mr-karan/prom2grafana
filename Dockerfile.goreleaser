FROM alpine:latest

# Install ca-certificates for HTTPS connections
RUN apk add --no-cache ca-certificates

WORKDIR /app

# Copy the pre-built binary from GoReleaser
COPY prom2grafana ./prom2grafana

# Copy environment example
COPY .env.example ./.env.example

# Make binary executable
RUN chmod +x ./prom2grafana

# Expose default port
EXPOSE 8080

# Run the application
CMD ["./prom2grafana"]